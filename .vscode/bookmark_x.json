{
  "type": "group",
  "name": "",
  "color": "",
  "uri": "",
  "children": [
    {
      "type": "group",
      "name": "解析任务",
      "color": "#066420",
      "uri": "",
      "children": [
        {
          "type": "group",
          "name": "task executor",
          "color": "#DC4767",
          "uri": "解析任务",
          "children": [
            {
              "type": "bookmark",
              "fsPath": "/home/lianghao/github/ragflow/rag/svr/task_executor.py",
              "line": 527,
              "col": 10,
              "name": "执行任务",
              "lineText": "def do_handle_task(task):",
              "uri": "解析任务/task executor"
            },
            {
              "type": "bookmark",
              "fsPath": "/home/lianghao/github/ragflow/rag/svr/task_executor.py",
              "line": 397,
              "col": 10,
              "name": "文本嵌入",
              "lineText": "def embedding(docs, mdl, parser_config=None, callback=None):",
              "uri": "解析任务/task executor"
            }
          ]
        },
        {
          "type": "group",
          "name": "naive",
          "color": "#F66369",
          "uri": "解析任务",
          "children": [
            {
              "type": "bookmark",
              "fsPath": "/home/lianghao/github/ragflow/rag/app/naive.py",
              "line": 237,
              "col": 8,
              "name": "naive chunk(解析切块、合并小块、分词）",
              "lineText": "",
              "uri": "解析任务/naive"
            },
            {
              "type": "bookmark",
              "fsPath": "/home/lianghao/github/ragflow/rag/app/naive.py",
              "line": 68,
              "col": 9,
              "name": "docx解析切块",
              "lineText": "return line",
              "uri": "解析任务/naive"
            },
            {
              "type": "bookmark",
              "fsPath": "/home/lianghao/github/ragflow/deepdoc/parser/docx_parser.py",
              "line": 21,
              "col": 13,
              "name": "docx解析切块基类",
              "lineText": "class RAGFlowDocxParser:",
              "uri": "解析任务/naive"
            },
            {
              "type": "bookmark",
              "fsPath": "/home/lianghao/github/ragflow/deepdoc/parser/pdf_parser.py",
              "line": 36,
              "col": 9,
              "name": "pdf解析切块",
              "lineText": "def __init__(self):",
              "uri": "解析任务/naive"
            },
            {
              "type": "bookmark",
              "fsPath": "/home/lianghao/github/ragflow/deepdoc/vision/ocr.py",
              "line": 543,
              "col": 10,
              "name": "pdf OCR解析",
              "lineText": "class OCR(object):",
              "uri": "解析任务/naive"
            },
            {
              "type": "bookmark",
              "fsPath": "/home/lianghao/github/ragflow/rag/nlp/__init__.py",
              "line": 539,
              "col": 6,
              "name": "通用合并小块",
              "lineText": "",
              "uri": "解析任务/naive"
            },
            {
              "type": "bookmark",
              "fsPath": "/home/lianghao/github/ragflow/rag/nlp/__init__.py",
              "line": 634,
              "col": 6,
              "name": "docx合并小块",
              "lineText": "",
              "uri": "解析任务/naive"
            }
          ]
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/rag/nlp/__init__.py",
          "line": 240,
          "col": 7,
          "name": "分词",
          "lineText": "return False",
          "uri": "解析任务"
        }
      ]
    },
    {
      "type": "group",
      "name": "问答",
      "color": "#0987BA",
      "uri": "",
      "children": [
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/api/apps/conversation_app.py",
          "line": 181,
          "col": 7,
          "name": "completion端点",
          "lineText": "@login_required",
          "uri": "问答"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/api/db/services/dialog_service.py",
          "line": 185,
          "col": 14,
          "name": "知识库对话",
          "lineText": "def chat(dialog, messages, stream=True, **kwargs):",
          "uri": "问答"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/rag/nlp/search.py",
          "line": 442,
          "col": 12,
          "name": "开始检索",
          "lineText": "def retrieval(self, question, embd_mdl, tenant_ids, kb_ids, page, page_size, similarity_threshold=0.2,",
          "uri": "问答"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/rag/nlp/search.py",
          "line": 78,
          "col": 9,
          "name": "执行搜索操作",
          "lineText": "def search(self, req, idx_names: str | list[str],",
          "uri": "问答"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/rag/nlp/query.py",
          "line": 69,
          "col": 11,
          "name": "处理查询文本，生成全文搜索查询表达式和关键词列表",
          "lineText": "def question(self, txt, tbl=\"qa\", min_match: float = 0.6):",
          "uri": "问答"
        }
      ]
    },
    {
      "type": "group",
      "name": "前端",
      "color": "#7F0BDF",
      "uri": "",
      "children": [
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/web/src/routes.ts",
          "line": 15,
          "col": 4,
          "name": "前端路由表",
          "lineText": "const routes = [",
          "uri": "前端"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/api/apps/__init__.py",
          "line": 143,
          "col": 4,
          "name": "动态注册所有找到的模块文件，并收集返回的 URL 前缀",
          "lineText": "client_urls_prefix = [",
          "uri": "前端"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/api/apps/__init__.py",
          "line": 149,
          "col": 8,
          "name": "jwt令牌解码为用户access_token",
          "lineText": "def load_user(web_request):",
          "uri": "前端"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/api/db/db_models.py",
          "line": 484,
          "col": 9,
          "name": "生成jwt签名令牌",
          "lineText": "def get_id(self):",
          "uri": "前端"
        }
      ]
    },
    {
      "type": "group",
      "name": "模型服务",
      "color": "#FCDF42",
      "uri": "",
      "children": [
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/conf/llm_factories.json",
          "line": 1,
          "col": 6,
          "name": "所有模型信息",
          "lineText": "\"factory_llm_infos\": [",
          "uri": "模型服务"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/rag/llm/chat_model.py",
          "line": 35,
          "col": 6,
          "name": "封装了所有模型的对话接口",
          "lineText": "class Base(ABC):",
          "uri": "模型服务"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/api/db/init_data.py",
          "line": 97,
          "col": 5,
          "name": "初始化 llm_factories、llm、tenant_llm 表",
          "lineText": "def init_llm_factory():",
          "uri": "模型服务"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/rag/llm/embedding_model.py",
          "line": 178,
          "col": 8,
          "name": "千问文本嵌入模型",
          "lineText": "class QWenEmbed(Base):",
          "uri": "模型服务"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/rag/llm/embedding_model.py",
          "line": 49,
          "col": 12,
          "name": "BAAI-bge文本嵌入模型",
          "lineText": "class DefaultEmbedding(Base):",
          "uri": "模型服务"
        }
      ]
    },
    {
      "type": "group",
      "name": "数据库服务",
      "color": "#57AC66",
      "uri": "",
      "children": [
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/rag/utils/es_conn.py",
          "line": 25,
          "col": 10,
          "name": "ES接口封装",
          "lineText": "class ESConnection(DocStoreConnection):",
          "uri": "数据库服务"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/api/db/services/task_service.py",
          "line": 48,
          "col": 10,
          "name": "task任务表操作",
          "lineText": "class TaskService(CommonService):",
          "uri": "数据库服务"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/api/db/services/common_service.py",
          "line": 23,
          "col": 12,
          "name": "Mysql封装基类",
          "lineText": "class CommonService:",
          "uri": "数据库服务"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/api/db/db_models.py",
          "line": 152,
          "col": 11,
          "name": "Mysql ORM",
          "lineText": "class BaseModel(Model):",
          "uri": "数据库服务"
        }
      ]
    },
    {
      "type": "group",
      "name": "其它",
      "color": "#C4A160",
      "uri": "",
      "children": [
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/rag/llm/embedding_model.py",
          "line": 72,
          "col": 13,
          "name": "线程锁保证模型只初始化一次，只有一个实例",
          "lineText": "with DefaultEmbedding._model_lock:",
          "uri": "其它"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/api/apps/user_app.py",
          "line": 713,
          "col": 10,
          "name": "复位任意用户的密码",
          "lineText": "@manager.route(\"/reset_password\", methods=[\"POST\"])",
          "uri": "其它"
        },
        {
          "type": "bookmark",
          "fsPath": "/home/lianghao/github/ragflow/api/apps/document_app.py",
          "line": 51,
          "col": 2,
          "name": "端点：上传文件",
          "lineText": "@manager.route('/upload', methods=['POST'])  # noqa: F821",
          "uri": "其它"
        }
      ]
    }
  ]
}